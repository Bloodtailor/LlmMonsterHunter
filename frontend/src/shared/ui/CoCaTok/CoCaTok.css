/* CoCaTok (Collectable Card Tokens) - Interactive 3D spinning collectible cards */
/* Always spinning, bouncing cards that explode dramatically and disappear forever */

/* ===== COCATOK FOUNDATION ===== */

.cocatok {
  width: 3em;
  height: 4em;
  perspective: 1000px;
  display: inline-block;
  cursor: pointer;
  transition: transform var(--transition-fast);
  position: relative;
}

/* Card bouncing - stops when exploding */
.cocatok:not(.cocatok-exploding) {
  animation: cardBounce 4s ease-in-out infinite;
}

/* Card bouncing animation */
@keyframes cardBounce {
  0%, 100% { 
    transform: translateY(0px) scale(1); 
  }
  50% { 
    transform: translateY(-6px) scale(1); 
  }
}

/* Whole card fades out after explosion */
.cocatok-exploding {
  animation: cardDisappear 1s ease-out forwards;
}

@keyframes cardDisappear {
  0% { 
    opacity: 1; 
  }
  70% { 
    opacity: 1; 
  }
  100% { 
    opacity: 0; 
  }
}

.cocatok:hover:not(.cocatok-disabled):not(.cocatok-spinning):not(.cocatok-exploding) {
  animation: hoverEffect 0.6s ease-out forwards; /* Smooth lift that matches turn-around */
}

.cocatok:active:not(.cocatok-disabled):not(.cocatok-spinning) {
  transform: translateY(-6px) scale(0.95);
}

/* Smooth hover effect - lift and scale together */
@keyframes hoverEffect {
  0% { 
    transform: translateY(0px) scale(1); 
  }
  100% { 
    transform: translateY(-6px) scale(1.05); 
  }
}

.cocatok-inner {
  position: relative;
  width: 100%;
  height: 100%;
  transform-style: preserve-3d;
  transition: transform var(--transition-normal); /* Smooth animation for hover */
}

/* Default gentle spinning animation - always active unless spinning fast, hovering, or exploding */
.cocatok:not(.cocatok-spinning):not(:hover):not(.cocatok-exploding) .cocatok-inner {
  animation: gentleSpin 4s linear infinite;
}

/* On hover - instantly face away, then quickly turn to face forward */
.cocatok:hover:not(.cocatok-spinning):not(.cocatok-exploding) .cocatok-inner {
  animation: turnToFaceYou 0.6s ease-out forwards;
}

@keyframes turnToFaceYou {
  0% { 
    transform: rotateY(180deg); /* Start facing away */
  }
  100% { 
    transform: rotateY(0deg); /* Turn to face you */
  }
}

@keyframes gentleSpin {
  0% { transform: rotateY(0deg); }
  100% { transform: rotateY(360deg); }
}

/* ===== CARD FACES (like loading spinner) ===== */

.cocatok-front,
.cocatok-back {
  position: absolute;
  width: 100%;
  height: 100%;
  backface-visibility: hidden;
  border-radius: var(--radius-lg);
  border: 1px solid;
  padding: 0.3em;
  box-sizing: border-box;
}

.cocatok-front {
  display: flex;
  flex-direction: column;
  gap: 0.2em;
}

.cocatok-back {
  transform: rotateY(180deg);
  display: flex;
  align-items: center;
  justify-content: center;
}

/* ===== CARD FRONT ELEMENTS (like loading spinner) ===== */

.card-image-area {
  width: 100%;
  height: 50%;
  background: var(--color-surface-elevated);
  border-radius: var(--radius-sm);
  opacity: 0.7;
  position: relative; /* Allow emoji to be positioned inside */
  display: flex;
  align-items: center;
  justify-content: center;
}

.card-title-line {
  width: 80%;
  height: 0.4em;
  background: currentColor;
  border-radius: var(--radius-sm);
  opacity: 0.6;
}

.card-text-line {
  width: 100%;
  height: 0.25em;
  background: currentColor;
  border-radius: var(--radius-sm);
  opacity: 0.4;
}

.card-text-line.short {
  width: 60%;
}

/* ===== CARD BACK ELEMENTS ===== */

.cocatok-emoji {
  font-size: 1.5em;
  z-index: 2;
  position: relative;
  filter: drop-shadow(0 2px 4px rgba(0,0,0,0.3));
  /* No animation - back emoji stays still */
}

/* Front emoji - lower opacity, positioned inside card image area, bounces */
.front-emoji {
  font-size: 1.2em;
  opacity: 0.4; /* Slightly more visible since it's inside the darker image area */
  z-index: 3;
  filter: drop-shadow(0 1px 2px rgba(0,0,0,0.2));
  animation: frontEmojiBounce 3s ease-in-out infinite;
}

@keyframes frontEmojiBounce {
  0%, 100% { 
    transform: translateY(0px); 
  }
  50% { 
    transform: translateY(-8px); 
  }
}

/* ===== SIZE VARIANTS ===== */

.cocatok-sm { 
  width: 2.5em; 
  height: 3.3em;
  font-size: 12px;
}

.cocatok-sm .cocatok-emoji {
  font-size: 1.2em;
}

.cocatok-md { 
  width: 3em; 
  height: 4em;
  font-size: 16px;
}

.cocatok-lg { 
  width: 3.5em; 
  height: 4.7em;
  font-size: 20px;
}

.cocatok-md .front-emoji {
  font-size: 1.2em;
}

.cocatok-lg .cocatok-emoji {
  font-size: 1.8em;
}

.cocatok-xl { 
  width: 4em; 
  height: 5.3em;
  font-size: 24px;
}

.cocatok-xl .cocatok-emoji {
  font-size: 2em;
}

/* ===== COLOR THEMES ===== */

/* Health CoCaTok - Red/Pink */
.cocatok-health .cocatok-front,
.cocatok-health .cocatok-back {
  background: #e74c3c;
  border-color: #c0392b;
  color: #c0392b;
  box-shadow: 0 4px 8px rgba(231, 76, 60, 0.3);
}

/* Fire CoCaTok - Orange/Red */
.cocatok-fire .cocatok-front,
.cocatok-fire .cocatok-back {
  background: linear-gradient(135deg, #ff6b35 0%, #f39c12 100%);
  border-color: #e67e22;
  color: #e67e22;
  box-shadow: 0 4px 8px rgba(255, 107, 53, 0.3);
}

/* Ice CoCaTok - Light Blue/Cyan */
.cocatok-ice .cocatok-front,
.cocatok-ice .cocatok-back {
  background: linear-gradient(135deg, #74b9ff 0%, #0984e3 100%);
  border-color: #2980b9;
  color: #2980b9;
  box-shadow: 0 4px 8px rgba(116, 185, 255, 0.3);
}

/* Lightning CoCaTok - Yellow/Electric */
.cocatok-lightning .cocatok-front,
.cocatok-lightning .cocatok-back {
  background: linear-gradient(135deg, #fdcb6e 0%, #f39c12 100%);
  border-color: #e17055;
  color: #e17055;
  box-shadow: 0 4px 8px rgba(253, 203, 110, 0.3);
}

/* Magic CoCaTok - Purple/Mystical */
.cocatok-magic .cocatok-front,
.cocatok-magic .cocatok-back {
  background: linear-gradient(135deg, #a29bfe 0%, #6c5ce7 100%);
  border-color: #5f27cd;
  color: #5f27cd;
  box-shadow: 0 4px 8px rgba(162, 155, 254, 0.3);
}

/* Poison CoCaTok - Green/Toxic */
.cocatok-poison .cocatok-front,
.cocatok-poison .cocatok-back {
  background: linear-gradient(135deg, #00b894 0%, #00a085 100%);
  border-color: #008f7a;
  color: #008f7a;
  box-shadow: 0 4px 8px rgba(0, 184, 148, 0.3);
}

/* Shield CoCaTok - Silver/Metallic */
.cocatok-shield .cocatok-front,
.cocatok-shield .cocatok-back {
  background: linear-gradient(135deg, #b2bec3 0%, #636e72 100%);
  border-color: #2d3436;
  color: #2d3436;
  box-shadow: 0 4px 8px rgba(178, 190, 195, 0.3);
}

/* Strength CoCaTok - Dark Red/Power */
.cocatok-strength .cocatok-front,
.cocatok-strength .cocatok-back {
  background: linear-gradient(135deg, #d63031 0%, #74b9ff 100%);
  border-color: #2d3436;
  color: #2d3436;
  box-shadow: 0 4px 8px rgba(214, 48, 49, 0.3);
}

/* Speed CoCaTok - Light Green/Wind */
.cocatok-speed .cocatok-front,
.cocatok-speed .cocatok-back {
  background: linear-gradient(135deg, #00b894 0%, #55a3ff 100%);
  border-color: #0984e3;
  color: #0984e3;
  box-shadow: 0 4px 8px rgba(0, 184, 148, 0.3);
}

/* ===== FAST SPINNING ANIMATION (when clicked) ===== */

.cocatok-spinning .cocatok-inner {
  animation: fastSpin 3s cubic-bezier(0.25, 0.46, 0.45, 0.94);
}

@keyframes fastSpin {
  0% { 
    transform: rotateY(0deg); 
  }
  60% { 
    transform: rotateY(1800deg); /* Fast spin - 5 full rotations */
  }
  100% { 
    transform: rotateY(1800deg); /* Stop facing forward */
  }
}

/* Scale effect during explosion + card fade out */
.cocatok-exploding .cocatok-inner {
  animation: explodeAndDisappear 1s ease-out forwards;
}

@keyframes explodeAndDisappear {
  0% { 
    transform: rotateY(1800deg) scale(1); 
    opacity: 1;
  }
  30% { 
    transform: rotateY(1800deg) scale(1.3); 
    opacity: 1;
  }
  60% { 
    transform: rotateY(1800deg) scale(1.1); 
    opacity: 1;
  }
  100% { 
    transform: rotateY(1800deg) scale(0.8); 
    opacity: 0; /* Card disappears forever */
  }
}

/* Make emojis disappear during explosion */
.cocatok-exploding .front-emoji {
  animation: frontEmojiDisappear 1s ease-out forwards;
}

.cocatok-exploding .cocatok-emoji {
  animation: emojiDisappear 1s ease-out forwards;
}

@keyframes explodeScale {
  0% { transform: rotateY(1800deg) scale(1); }
  50% { transform: rotateY(1800deg) scale(1.2); }
  100% { transform: rotateY(1800deg) scale(1); }
}

@keyframes frontEmojiDisappear {
  0% { 
    opacity: 0.4; 
    transform: scale(1); 
  }
  100% { 
    opacity: 0; 
    transform: scale(0); 
  }
}

@keyframes emojiDisappear {
  0% { 
    opacity: 1; 
    transform: scale(1); 
  }
  100% { 
    opacity: 0; 
    transform: scale(0); 
  }
}

/* ===== DISABLED STATE ===== */

.cocatok-disabled {
  opacity: var(--opacity-disabled);
  cursor: not-allowed;
  filter: grayscale(0.5);
  animation: none; /* No bouncing when disabled */
}

.cocatok-disabled:hover {
  transform: none;
  animation: none;
}

.cocatok-disabled .cocatok-inner {
  animation: none;
}

.cocatok-disabled .front-emoji {
  animation: none;
}

/* ===== ACCESSIBILITY ===== */

@media (prefers-reduced-motion: reduce) {
  .cocatok,
  .cocatok-inner,
  .front-emoji {
    animation: none !important;
  }
  
  .cocatok:hover:not(.cocatok-spinning) .cocatok-inner {
    transform: rotateY(0deg);
  }
  
  .cocatok-spinning .cocatok-inner {
    transform: rotateY(180deg);
  }
  
  .cocatok-exploding .cocatok-inner {
    transform: rotateY(180deg) scale(1.1);
  }
  
  .cocatok-exploding .cocatok-emoji,
  .cocatok-exploding .front-emoji {
    opacity: 0;
  }
}